{% assign svc = site.data.services %}
{% assign items = svc.services %}

<section class="serviceComparisons">
  <div class="serviceComparisons__wrap">

    <div class="serviceComparisons__scroll" role="region" aria-label="Services comparison table" tabindex="0">
      <table class="serviceComparisons__table" role="table">
        <thead>
          <tr>
            <th class="serviceComparisons__th serviceComparisons__th--feature"> </th>

            <th class="serviceComparisons__th">
              <div class="plan">
                <div class="plan__name">{{ svc.packages.pkg_full_detail.name }}</div>
                <div class="plan__sub">{{ svc.packages.pkg_full_detail.focus }}</div>
              </div>
            </th>

            <th class="serviceComparisons__th serviceComparisons__th--highlight">
              <div class="plan plan--highlight">
                <div class="plan__name">{{ svc.packages.pkg_exterior.name }}</div>
                <div class="plan__sub">{{ svc.packages.pkg_exterior.focus }}</div>
              </div>
            </th>

            <th class="serviceComparisons__th">
              <div class="plan">
                <div class="plan__name">{{ svc.packages.pkg_interior.name }}</div>
                <div class="plan__sub">{{ svc.packages.pkg_interior.focus }}</div>
              </div>
            </th>
          </tr>
        </thead>

        <tbody>
          {% assign current_group = "" %}

          {% for item in items %}
            {% assign g = item.group | default: "" %}

            {% if g != "" and g != current_group %}
              {% assign current_group = g %}
              <tr class="serviceComparisons__section">
                <td colspan="4">
                  <span class="serviceComparisons__sectionTitle">{{ current_group | upcase }}</span>
                </td>
              </tr>
            {% endif %}

            <tr class="serviceComparisons__row">
              <th class="serviceComparisons__feature" scope="row">
                <div class="feature">
                  <div class="feature__name">{{ item.name }}</div>
                  {% if item.description %}
                    <div class="feature__desc">{{ item.description }}</div>
                  {% endif %}
                </div>
              </th>

              <td class="serviceComparisons__cell">{% include services-cell.html val=item.pkg_full_detail %}</td>
              <td class="serviceComparisons__cell serviceComparisons__cell--highlight">{% include services-cell.html val=item.pkg_exterior %}</td>
              <td class="serviceComparisons__cell">{% include services-cell.html val=item.pkg_interior %}</td>
            </tr>
          {% endfor %}
        </tbody>

        <tfoot>
          <tr class="serviceComparisons__ctaRow">
            <th class="serviceComparisons__feature serviceComparisons__ctaSpacer" scope="row">
              <!-- empty spacer cell under the feature column -->
            </th>

            <td class="serviceComparisons__cell serviceComparisons__ctaCell">
              <a class="serviceComparisons__btn" href="#" aria-label="Book Full Detail">Book now</a>
            </td>

            <td class="serviceComparisons__cell serviceComparisons__ctaCell">
              <a class="serviceComparisons__btn" href="#" aria-label="Book Exterior Only">Book now</a>
            </td>

            <td class="serviceComparisons__cell serviceComparisons__ctaCell">
              <a class="serviceComparisons__btn" href="#" aria-label="Book Interior Only">Book now</a>
            </td>
          </tr>
        </tfoot>

      </table>
    </div>

  </div>
</section>
